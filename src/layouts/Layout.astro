---
import "@/styles/global.css";

export interface Props {
  title: string;
}

const { title } = Astro.props;
---

<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <link rel="icon" type="image/svg+xml" href="/favicon.png" />
    <meta name="generator" content={Astro.generator} />
    <title>{title}</title>
  </head>
  <body background="/bg.gif">
    <audio id="bg-music" src="/Boards of Canada- Echus [fjrPpzNeNZ0].m4a" loop />

    <div id="audio-overlay" class="audio-overlay">
      <center>
        <table border="4" cellpadding="15" cellspacing="5" bgcolor="#C0C0C0" width="400">
          <tr>
            <td align="center">
              <h2 style="color: #FF0000; transform: translateX(-40px);">
                Let me play music ??
              </h2>
              <marquee scrollamount="8">
                <font face="Arial, sans-serif" size="2">
                  PLEASEPLEASEPLEASEPLEASEPLEASEPLEASEPLEASEPLEASEPLEASEPLEASEPLEASEPLEASEPLEASEPLEASEPLEASEPLEASEPLEASEPLEASEPLEASEPLEASEPLEASEPLEASEPLEASEPLEASE
                </font>
                <br /><br />
              </marquee>
              <button id="enter-btn" style="cursor: pointer; padding: 5px;">
                <font face="Helvetica, sans-serif" size="2">
                  <b>[  OK  ]</b>
                </font>
              </button>
              <br /><br />
            </td>
          </tr>
        </table>
      </center>
    </div>

    <div id="music-btn" title="Pause music" class="pause-btn">
      || PAUSE
    </div>

    <br />

    <slot />

    <script>
      var overlay = document.getElementById("audio-overlay");
      var enterBtn = document.getElementById("enter-btn");
      var audio = document.getElementById("bg-music") as HTMLAudioElement;
      var musicBtn = document.getElementById("music-btn") as HTMLElement;

      enterBtn.onclick = function () {
        audio.play();
        overlay.style.display = "none";
        musicBtn.style.display = "block";
      };

      musicBtn.onclick = function () {
        if (audio.paused) {
          audio.play();
          musicBtn.textContent = "|| PAUSE";
          musicBtn.title = "Pause music";
        } else {
          audio.pause();
          musicBtn.textContent = "> PLAY";
          musicBtn.title = "Resume music";
        }
      };
    </script>
  </body>
</html>
